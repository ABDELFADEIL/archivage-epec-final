<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="2.0"
                 xmlns="http://java.sun.com/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd">

    <description>Archivage domain module</description>

    <entity
            class="org.simplon.epec.archivage.domain.document.entity.DigitalDocument"
            name="DigitalDocument" access="FIELD">
        <table name="digitalDocument" />

        <attributes>
            <id name="document_id">
                <column name="document_id" length="55" />
            </id>
            <basic name="archive_format">
                <column name="archive_format" />
            </basic>
            <basic name="encoding_doc">
                <column name="encoding_doc"/>
                <lob/>
            </basic>
            <basic name="file_name">
                <column name="file_name" />
            </basic>

            <one-to-one name="context" fetch="LAZY"
                        target-entity="org.simplon.epec.archivage.domain.document.entity.Context">
                <join-column name="context" nullable="false" updatable="false"/>
                <cascade>
                    <cascade-all />
                </cascade>
            </one-to-one>
        </attributes>
    </entity>

    <entity
            class="org.simplon.epec.archivage.domain.document.entity.Context"
            name="Context" access="FIELD">
        <table name="context"/>

        <attributes>
            <id name="context_id">
                <column name="context_id" length="55" />
            </id>
            <basic name="archiving_reference_date">
                <column name="archiving_reference_date" />
            </basic>
            <basic name="conserv_unit_id">
                <column name="conserv_unit_id" />
            </basic>
            <basic name="final_business_processing_date">
                <column name="final_business_processing_date" />
            </basic>
            <basic name="deletion_date">
                <column name="deletion_date" />
            </basic>
            <basic name="final_hold_date">
                <column name="final_hold_date" />
            </basic>
            <basic name="frozen_label">
                <column name="frozen_label" />
            </basic>
            <basic name="frozen">
                <column name="frozen" />
            </basic>
            <basic name="hold_status">
                <column name="hold_status" />
            </basic>
            <basic name="mine_type">
                <column name="mine_type" />
            </basic>

            <many-to-one name="classification_nature" fetch="LAZY"
                         target-entity="org.simplon.epec.archivage.domain.classificationNature.entity.ClassificationNature">
                <join-column name="classification_nature" nullable="false" updatable="false"/>
                <cascade>
                    <cascade-all />
                </cascade>
            </many-to-one>
            <one-to-one name="account" fetch="LAZY"
                         target-entity="org.simplon.epec.archivage.domain.account.entity.Account">
                <join-column name="account" nullable="true" updatable="false"/>
                <cascade>
                    <cascade-all />
                </cascade>
            </one-to-one>
            <one-to-one name="contract" fetch="LAZY"
                         target-entity="org.simplon.epec.archivage.domain.contract.entity.Contract">
                <join-column name="contract" nullable="true" updatable="false"/>
                <cascade>
                    <cascade-all />
                </cascade>
            </one-to-one>
            <one-to-one name="event" fetch="LAZY"
                        target-entity="org.simplon.epec.archivage.domain.event.entity.Event">
                <join-column name="event" nullable="true" updatable="false"/>
                <cascade>
                    <cascade-all />
                </cascade>
            </one-to-one>

        </attributes>
    </entity>
</entity-mappings>

